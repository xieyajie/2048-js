require=function e(t,i,o){function n(a,c){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return n(i?i:e)},u,u.exports,e,t,i,o)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({Game:[function(e,t,i){"use strict";cc._RFpush(t,"52cea1c2YxOG7fVaE2W8T77","Game"),cc.Class({"extends":cc.Component,properties:{background:cc.Sprite,mapBackground:cc.Sprite,labelBackground:cc.Prefab,overView:cc.Prefab,manager:{"default":null},tiles:[],tile:cc.Prefab,tileOriginX:0,tileOriginY:0,tileSpace:10,maxNumLabel:cc.Label,describeLabel:cc.Label,score:0,scoreLabel:cc.Label,bestScore:0,bestScoreLabel:cc.Label,currentOverView:{"default":null,type:cc.Sprite},animationDuration:.1},onLoad:function(){this.setupTiles();var e=cc.sys.localStorage.getItem("bestScore");e||(e=0),this.updateBestScore(e),this.setupMapBackground(),this.setupEventListener()},setTilePosition:function(e,t,i,o){var n=this.tileOriginX+this.tileSpace+i*(this.tileSpace+this.manager.tileSize.width),r=this.tileOriginY+this.tileSpace+t*(this.tileSpace+this.manager.tileSize.height);if(o){var a=cc.moveTo(this.animationDuration,cc.p(n,r));e.runAction(a)}else e.setPosition(n,r);e.row=t,e.col=i},setupTiles:function(){this.manager=e("Manager"),3==this.manager.order?(this.tiles=[[null,null,null],[null,null,null],[null,null,null]],this.maxNumLabel.string="1024",this.describeLabel.string="Join the numbers\nto get to 1024"):4==this.manager.order?(this.tiles=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],this.maxNumLabel.string="2048",this.describeLabel.string="Join the numbers\nto get to 2048"):5==this.manager.order&&(this.tiles=[[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null]],this.maxNumLabel.string="8192",this.describeLabel.string="Join the numbers\nto get to 8192")},setupMapBackground:function(){this.background.node.color=this.manager.backgroundColor(),this.mapBackground.node.color=this.manager.scoreBoardColor();var e=cc.instantiate(this.labelBackground);this.manager.tileSize.width=e.width,this.manager.tileSize.height=e.height;var t=this.manager.getRowCount(),i=this.manager.getColCount(),o=(this.manager.tileSize.width+this.tileSpace)*t+this.tileSpace,n=(this.manager.tileSize.height+this.tileSpace)*i+this.tileSpace;this.mapBackground.node.width=o,this.mapBackground.node.height=n,this.tileOriginX=-1*(o-this.manager.tileSize.width)/2,this.tileOriginY=-1*(n-this.manager.tileSize.height)/2;for(var r=0;r<t;r++)for(var a=0;a<i;a++){var c=cc.instantiate(this.labelBackground);this.setTilePosition(c,r,a,!1),this.mapBackground.node.addChild(c)}this.createRandomTile(!1),this.createRandomTile(!1)},showOverView:function(){null==this.currentOverView&&(this.currentOverView=cc.instantiate(this.overView)),this.background.node.addChild(this.currentOverView)},setupEventListener:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyUp:function(e){var t=!1;switch(e.keyCode){case cc.KEY.up:t=this.moveUp();break;case cc.KEY.down:t=this.moveDown();break;case cc.KEY.left:t=this.moveLeft();break;case cc.KEY.right:t=this.moveRight()}if(t){var i=this.createRandomTile(!0);i||this.showOverView()}},addScore:function(e){this.score+=e,this.scoreLabel.string=this.score.toString(),this.score>this.bestScore&&this.updateBestScore(this.score)},clearScore:function(){this.score=0,this.scoreLabel.string=this.score.toString()},updateBestScore:function(e){this.bestScore=e,this.bestScoreLabel.string=this.bestScore.toString(),cc.sys.localStorage.setItem("bestScore",this.bestScore)},handleRestart:function(){this.currentOverView&&this.currentOverView.removeFromParent(),this.setupTiles(),this.setupMapBackground(),this.score=0,this.scoreLabel.string=this.score.toString()},createRandomTile:function(e){for(var t=this.manager.getRowCount(),i=this.manager.getColCount(),o=[],n=0;n<t;n++)for(var r=0;r<i;r++)null==this.tiles[n][r]&&o.push(cc.p(n,r));if(0==o.size)return!1;var a=Math.floor(Math.random()*o.length),c=o[a];if(e){var l=cc.delayTime(this.animationDuration+.1),s=cc.callFunc(this.createTileAtPosition,this,c),u=cc.sequence([l,s]);this.node.runAction(u)}else this.createRandomTile(this.node,c);return!0},createTileAtPosition:function(e,t){var i=cc.instantiate(this.tile);this.tiles[t.x][t.y]=i,this.setTilePosition(i,t.x,t.y),this.mapBackground.node.addChild(i)},mergeTiles:function(e,t){},moveTilePosition:function(e,t,i,o,n){this.tiles[t][i]=null,this.tiles[o][n]=e,this.setTilePosition(e,o,n,!0)},moveUp:function(){var e=this.manager.getRowCount(),t=this.manager.getColCount();return this.moveVertically(t,e,function(t){return e-1-t})},moveDown:function(){var e=this.manager.getRowCount(),t=this.manager.getColCount();return this.moveVertically(t,e,function(e){return e})},moveLeft:function(){var e=this.manager.getRowCount(),t=this.manager.getColCount();return this.moveHorizontally(e,t,function(e){return e})},moveRight:function(){var e=this.manager.getRowCount(),t=this.manager.getColCount();return this.moveHorizontally(e,t,function(e){return t-1-e})},moveVertically:function(t,i,o){for(var n=!1,r=0;r<t;r++)for(var a=0,c=this.tiles[o(a)][r],l=1;l<i;l++){var s=o(l),u=this.tiles[s][r];if(null!=u)if(null!=c){var h=c.getComponent("Tile"),g=u.getComponent("Tile"),d=o(a+1);if(h.tag!=g.tag)s!=d?(this.moveTilePosition(u,s,r,d,r),a++,n=!0):a=l,c=u;else{var m=e("Manager"),p=Math.pow(m.cardinality,g.tag+1);this.addScore(p),this.moveTilePosition(u,s,r,c.row,c.col),this.tiles[c.row][c.col]=c;var f=cc.delayTime(this.animationDuration),v=cc.callFunc(this.updateTag,this,u),b=cc.sequence([f,v]);c.runAction(b),a++,c=this.tiles[o(a)][r],n=!0}}else this.moveTilePosition(u,s,r,o(a),r),c=u,n=!0}return n},moveHorizontally:function(t,i,o){for(var n=!1,r=0;r<t;r++)for(var a=0,c=this.tiles[r][o(a)],l=1;l<i;l++){var s=o(l),u=this.tiles[r][s];if(null!=u)if(null!=c){var h=c.getComponent("Tile"),g=u.getComponent("Tile"),d=o(a+1);if(h.tag!=g.tag)s!=d?(this.moveTilePosition(u,r,s,r,d),a++,n=!0):a=l,c=u;else{var m=e("Manager"),p=Math.pow(m.cardinality,g.tag+1);this.addScore(p),this.moveTilePosition(u,r,s,c.row,c.col),this.tiles[c.row][c.col]=c;var f=cc.delayTime(this.animationDuration),v=cc.callFunc(this.updateTag,this,u),b=cc.sequence([f,v]);c.runAction(b),a++,c=this.tiles[r][o(a)],n=!0}}else this.moveTilePosition(u,r,s,r,o(a)),c=u,n=!0}return n},updateTag:function(e,t){var i=e.getComponent("Tile");i.tag+=1,i.updateTag(),t.removeFromParent()}}),cc._RFpop()},{Manager:"Manager"}],Manager:[function(e,t,i){"use strict";cc._RFpush(t,"47c83nNWbBKHLx7R+Tiygke","Manager"),cc.Class({"extends":cc.Component,statics:{cardinality:2,order:4,tileSize:{width:130,height:130},backgroundColor:function(){return cc.color(250,248,239,255)},scoreBoardColor:function(){return cc.color(187,173,160,255)},socreHintColor:function(){return cc.color(235,231,227,255)},socreLabelColor:function(){return cc.color(255,255,255,255)},buttonColor:function(){return cc.color(119,110,101,255)},colorForTag:function(e){var t=cc.color(255,255,255,255);switch(e){case 0:t=cc.color(238,228,218,255);break;case 1:t=cc.color(237,224,200,255);break;case 2:t=cc.color(242,177,121,255);break;case 3:t=cc.color(245,149,99,255);break;case 4:t=cc.color(246,124,95,255);break;case 5:t=cc.color(246,94,59,255);break;case 6:t=cc.color(237,207,114,255);break;case 7:t=cc.color(237,204,97,255);break;case 8:t=cc.color(237,200,80,255);break;case 9:t=cc.color(237,197,63,255);break;case 10:t=cc.color(237,194,46,255)}return t},textColorForTag:function(e){var t=cc.color(255,255,255,255);switch(e){case 0:case 1:t=cc.color(118,109,100,255)}return t},getRowCount:function(){return this.order},getColCount:function(){return this.order}}}),cc._RFpop()},{}],ScoreBoardUI:[function(e,t,i){"use strict";cc._RFpush(t,"a6aab8B42NDdoA4LFpqn/fL","ScoreBoardUI"),cc.Class({"extends":cc.Component,properties:{boardBackground:cc.Sprite,boardHint:cc.Label,boardLabel:cc.Label},onLoad:function(){var t=e("Manager");this.boardBackground.node.color=t.scoreBoardColor(),this.boardHint.node.color=t.socreHintColor(),this.boardLabel.node.color=t.socreLabelColor()}}),cc._RFpop()},{Manager:"Manager"}],Setting:[function(e,t,i){"use strict";cc._RFpush(t,"a9457HC1rxKlKVj7VRGaaXh","Setting"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],Tile:[function(e,t,i){"use strict";cc._RFpush(t,"bb0c91TruNI4KugNQ8+Qfus","Tile"),cc.Class({"extends":cc.Component,properties:{tag:0,row:0,col:0,label:{"default":null,type:cc.Label}},onLoad:function(){this.label.fontSize=50,this.setTag(0)},update:function(e){},setTag:function(e){this.tag=e,this.updateTag()},updateTag:function(){var t=e("Manager"),i=t.colorForTag(this.tag);this.node.setColor(i);var o=t.textColorForTag(this.tag);this.label.node.color=o;var n=Math.pow(t.cardinality,this.tag+1);this.label.string=n.toString()}}),cc._RFpop()},{Manager:"Manager"}]},{},["Manager","Game","ScoreBoardUI","Setting","Tile"]);